<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- SweetAlert2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="#">Sistema Financiero</a>
    </div>
  </nav>

  <!-- Login Form -->
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow">
          <div class="card-header bg-primary text-white">Iniciar Sesión</div>
          <div class="card-body">
            <form id="loginForm">
              <div class="mb-3">
                <label for="username" class="form-label">Usuario</label>
                <input type="text" id="username" class="form-control" placeholder="Usuario" required>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" id="password" class="form-control" placeholder="Contraseña" required>
              </div>
              <button type="submit" class="btn btn-success w-100">Ingresar</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Productos Disponibles
  <div class="container mt-5">
    <h3 class="text-center">Productos Disponibles</h3>
    <div id="productos" class="row g-3"></div>
  </div> -->

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Custom JS -->
  <script src="{{ url_for('static', filename='js/login.js') }}"></script>
  
  <script>
    const user_id = localStorage.getItem("user_id") || "cliente";

    // async function cargarProductos() {
    //   const res = await fetch("http://127.0.0.1:5000/api/productos");
    //   const productos = await res.json();
    //   const contenedor = document.getElementById("productos");
    //   contenedor.innerHTML = "";

    //   productos.forEach(prod => {
    //     const div = document.createElement("div");
    //     div.className = "col-md-4";
    //     div.innerHTML = `
    //       <div class="card shadow-sm">
    //         <img src="/uploads/${prod.imagen || 'placeholder.png'}" class="card-img-top" alt="${prod.nombre}" style="max-height: 200px;">
    //         <div class="card-body">
    //           <h5 class="card-title">${prod.nombre}</h5>
    //           <p class="card-text">$${prod.precio}</p>
    //           <p class="card-text">${prod.detalles}</p>
    //           <p class="card-text">Cantidad disponible: ${prod.cantidad}</p>
    //           <form onsubmit="return comprarProducto(event, ${prod.id}, ${prod.precio})">
    //             <div class="input-group mb-3">
    //               <input type="number" name="cantidad" class="form-control" placeholder="Cantidad" min="1" max="${prod.cantidad}" required>
    //               <button class="btn btn-primary" type="submit">Comprar</button>
    //             </div>
    //           </form>
    //         </div>
    //       </div>
    //     `;
    //     contenedor.appendChild(div);
    //   });
    // }

    // async function comprarProducto(e, productoId, precio) {
    //   e.preventDefault();
    //   const cantidad = parseInt(e.target.cantidad.value);
    //   if (!cantidad || cantidad <= 0) return;

    //   const data = new FormData();
    //   data.append("tipo", "compra producto " + productoId);
    //   data.append("monto", cantidad * precio);
    //   data.append("fecha", new Date().toISOString().split("T")[0]);
    //   data.append("usuario_id", user_id);
    //   data.append("cantidad", cantidad);

    //   const res = await fetch("http://127.0.0.1:5000/api/salidas/", {
    //     method: "POST",
    //     body: data
    //   });

    //   if (res.ok) {
    //     Swal.fire({
    //       icon: 'success',
    //       title: 'Compra realizada',
    //       text: 'La compra se ha realizado correctamente.',
    //       confirmButtonColor: '#3085d6'
    //     });
    //     cargarProductos();
    //   } else {
    //     Swal.fire({
    //       icon: 'error',
    //       title: 'Error',
    //       text: 'No se pudo procesar la compra.',
    //       confirmButtonColor: '#d33'
    //     });
    //   }
    // }

    // cargarProductos();
  </script>
</body>
</html>
